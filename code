#pgzero
import random

WIDTH = 700 # –®–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞
HEIGHT = 400 # –í—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞

TITLE = "–¢–∞–π–Ω—ã –ì–ê–õ–ê–ö–¢–ò–ö–ò" # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞ –∏–≥—Ä—ã
FPS = 45 # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É

fon = Actor("space")
fon_win = Actor("galaktika")
ship = Actor("turtle_ship", (350, 350))
lazer = Actor("lazer_b")
polomka = Actor("polomka")
GO = Actor("GO", (350, 200))
planets = [Actor("planet_1", (random.randint(0, 700), -165)), Actor("planet_2", (random.randint(0, 700), -595)), Actor("planet_3", (random.randint(0, 700), -1200)), Actor("planet_4", (random.randint(0, 700), -1500)), Actor("planet_5", (random.randint(0, 700), -2000)), Actor("planet_6", (random.randint(0, 700), -2500)), Actor("chasi", (random.randint(0, 700), random.randint(-800, -80))), Actor("bomba", (random.randint(0, 700), random.randint(-800, -80))), Actor("klad", (random.randint(0, 700), random.randint(-800, -80)))]
krot = Actor("krot", (350, 200))
rose = Actor("Arterose", (random.randint(0, 700), random.randint(-200, -100)))
hole = Actor("black_hole", (random.randint(0, 700), random.randint(-200, -100)))
starec_final = Actor("artestarec", (50, 100))
artegora_flower = Actor("artegora", (50, 200))
vojd = Actor("vojd", (610, 120))
vragi = []
bullets = []
bullets_left = []
bullets_right = []
knopka = Actor("knopka", (350, 305))
win = Actor("pobeda", (350, 85))
glove = Actor("glove", (620, 340))
glove_2 = Actor("glove", (620, 300))
vrag_menu = Actor("arteship", (50, 300))
starec_menu = Actor("artestarec", (50, 250))
mode = 'shooter'
colli = 0
count_vragi = 0
count_monety = 0
count_polomok = 0
arterose_vin = 0
popytka = 4
level = 1
enemies = []
totem = Actor("totem", (50, 300))
my_map = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 
          [0, 2, 3, 2, 3, 2, 5, 5, 5, 2, 3, 2, 3, 0], 
          [0, 3, 4, 5, 4, 5, 4, 4, 4, 5, 4, 5, 4, 0], 
          [0, 2, 5, 1, 1, 1, 4, 5, 4, 1, 1, 1, 5, 0], 
          [0, 3, 4, 5, 4, 5, 4, 4, 4, 5, 4, 5, 4, 0], 
          [0, 2, 3, 2, 3, 2, 5, 5, 5, 2, 3, 2, 3, 0], 
          [0, 2, 5, 1, 1, 1, 4, 5, 4, 1, 1, 1, 5, 0], 
          [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],]
f1 = Actor("f_1")
f2 = Actor("f_2")
f3 = Actor("f_3")
f4 = Actor("f_4")
f5 = Actor("f_5")
f6 = Actor("f_6")
hero = Actor("hero_red")
hero.top = f1.height
hero.left = f1.width
hero_red = Actor("hero_red", (50, 200), size=(40,70))

mode = 'privetstvie'

#–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Ä–∞–≥–æ–≤
def plus_vrag():
    if mode == "shooter":
        x = random.randint(0, 700)
        y = random.randint(-450, -50)
        vrag = Actor("arteship", (x, y))
        vrag.speed = random.randint(4, 8)
        vragi.append(vrag)
for i in range(8):
    plus_vrag()

# —Å–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ç–µ—Å—Ç–∞—Ä—Ü–µ–≤ (–≤ —Ä–æ–≥–∞–ª–∏–∫–µ)
for i in range(5):
    x = random.randint(1, 12) * f1.width
    y = random.randint(1, 6) * f1.height
    enemy = Actor("artestarec", topleft = (x, y))
    enemies.append(enemy)
    for j in range(len(enemies)):
        if j == 0:
            enemy.bonus = 1
        else:
            enemy.bonus = 0

# –ë–æ–Ω—É—Å—ã
artegori = []
palochki = []

def map_draw():
    for i in range(len(my_map)):
        for j in range(len(my_map[0])):
            if my_map[i][j] == 0:
                f1.left = f1.width*j
                f1.top = f1.height*i
                f1.draw()
            elif my_map[i][j] == 1:
                f2.left = f2.width*j
                f2.top = f2.height*i
                f2.draw()
            elif my_map[i][j] == 2:
                f3.left = f3.width*j
                f3.top = f3.height*i
                f3.draw()  
            elif my_map[i][j] == 3:
                f4.left = f4.width*j
                f4.top = f4.height*i
                f4.draw()
            elif my_map[i][j] == 4:
                f5.left = f5.width*j
                f5.top = f5.height*i
                f5.draw()
            elif my_map[i][j] == 5:
                f6.left = f6.width*j
                f6.top = f6.height*i
                f6.draw()

# –û—Ç—Ä–∏—Å–æ–≤–∫–∞
def draw():
    global mode, planets, popytka
    screen.clear()
    # –†–µ–∂–∏–º –∏–≥—Ä—ã
    if mode == 'shooter':
        fon.draw()

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–ª–∞–Ω–µ—Ç
        for i in range(len(planets)):
            planets[i].draw()
        
        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫—Ä–æ—Ç–æ–≤–æ–π –Ω–æ—Ä—ã –∏ —á—ë—Ä–Ω–æ–π –¥—ã—Ä—ã
        if count_vragi >= 50 and level == 1:
            krot.draw()

        hole.draw()

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ—Ä–∞–±–ª—è
        ship.draw()

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∞—Ä—Ç–µ—Ä–æ–∑—ã
        if count_vragi >= 35 and level == 1:
            rose.draw()

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—á—ë—Ç–∞, —É—Ä–æ–≤–Ω–∏
        screen.draw.text("ü™ô ", center = (678, 26), color = "white", fontsize = 24)
        screen.draw.text(count_vragi, center = (640, 26), color = "green", fontsize = 24)
        screen.draw.text(level, (45, 15), color = "green", fontsize = 24)
        screen.draw.text("lvl ", (10, 15), color = "white", fontsize = 24)
        
        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—Ä–∞–≥–æ–≤
        for i in range(len(vragi)):
            vragi[i].draw()
            
        #–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—É–ª—å
        for i in range(len(bullets)):
            bullets[i].draw()
        
        for i in range(len(bullets_left)):
            bullets_left[i].draw()

        for i in range(len(bullets_right)):
            bullets_right[i].draw()
        
##################################################### –û–∫–Ω–æ —Ä–æ–≥–∞–ª–∏–∫–∞
    elif mode == 'krot_nora':
    #–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç  
        planets = []
        screen.clear()
        map_draw()
        for i in range(len(enemies)):
            enemies[i].draw()

        #–æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–æ–Ω—É—Å–æ–≤
        for i in range(len(palochki)):
            palochki[i].draw()
        for i in range(len(artegori)):
            artegori[i].draw()
            
        hero.draw()
        hero.draw()
   
      # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞–π—Ç–∏ —Ü–≤–µ—Ç–æ–∫ –∞—Ä—Ç–µ–≥–æ—Ä—ã 
        screen.draw.text("–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞–π—Ç–∏ —Ü–≤–µ—Ç–æ–∫ –ê—Ä—Ç–µ–≥–æ—Ä—ã", center = (450, 375), color = "black", fontsize = 16)
        screen.draw.text(popytka, center = (650, 375), color = "black", fontsize = 16)   

    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–µ–Ω—é
    elif mode == "privetstvie":
        fon_win.draw()
        screen.draw.text("–¢–ê–ô–ù–´    –ì–ê–õ–ê–ö–¢–ò–ö–ò!", center = (350, 40), color = "green", fontsize = 36)
        vojd.draw()
        hero_red.draw()
        glove.draw()
        screen.draw.text("–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –Ω–∞ –ì–∞–ª–∞–∫—Ç–∏–æ–Ω–µ!", center = (350, 70), color = "black", fontsize = 16)
        screen.draw.text("–ß—Ç–æ —Ç—ã –∏—â–µ—à—å, —Å—Ç—Ä–∞–Ω–Ω–∏–∫?", center = (350, 88), color = "black", fontsize = 16)
        screen.draw.text("–î—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç - –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–¥–∞–ª—å–æ–Ω,", center = (320, 106), color = "yellow", fontsize = 16)
        screen.draw.text("—á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ –Ω–∞—à—É –ø–ª–∞–Ω–µ—Ç—É –ö–ª–∏–æ –æ—Ç –ø–æ—Ç–æ–ø–∞.", center = (320, 124), color = "yellow", fontsize = 16)
        screen.draw.text("–ú—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –µ–≥–æ –Ω–∞ –ì–∞–ª–∞–∫—Ç–∏–æ–Ω–µ", center = (350, 142), color = "black", fontsize = 16)
        screen.draw.text("–ß—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–µ–¥–∞–ª—å–æ–Ω?", center = (320, 160), color = "yellow", fontsize = 16)
        screen.draw.text("–ú—ã –æ—Ç–¥–∞–¥–∏–º –µ–≥–æ –≤ –æ–±–º–µ–Ω –Ω–∞ —Ü–≤–µ—Ç–æ–∫ –ê—Ä—Ç–µ–≥–æ—Ä—ã,", center = (350, 178), color = "black", fontsize = 16)
        screen.draw.text("–∫–æ—Ç–æ—Ä—ã–π —Å–ø–∞—Å–µ—Ç –Ω–∞—à—É –ø–ª–∞–Ω–µ—Ç—É –æ—Ç –∑–∞—Å—É—Ö–∏.", center = (350, 196), color = "black", fontsize = 16)
        screen.draw.text("–û–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≥–∞–ª–∞–∫—Ç–∏–∫–µ –ê—Ä—Ç–æ–Ω —É –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–µ—Ä–∏–∞–Ω—Ü–µ–≤", center = (350, 214), color = "black", fontsize = 16)
        screen.draw.text("–¢—ã –ø–æ–ø–∞–¥–µ—à—å —Ç—É–¥–∞ —á–µ—Ä–µ–∑ –∫—Ä–æ—Ç–æ–≤—É—é –Ω–æ—Ä—É.", center = (350, 232), color = "black", fontsize = 16)
        screen.draw.text("–ù–∞–π–¥–∏ –≤ –∫–æ—Å–º–æ—Å–µ —Ç–æ—Ç–µ–º –ê—Ä—Ç–µ—Ä–æ–∑—É, –æ—Ç—ã—â–∏ –ê—Ä—Ç–µ—Å—Ç–∞—Ä—Ü–∞,", center = (350, 250), color = "black", fontsize = 16)
        screen.draw.text("–∏ –æ–Ω –æ—Ç–¥–∞—Å—Ç —Ç–µ–±–µ —Ü–≤–µ—Ç–æ–∫ –ê—Ä—Ç–µ–≥–æ—Ä—ã –≤ –æ–±–º–µ–Ω –Ω–∞ –ê—Ä—Ç–µ—Ä–æ–∑—É,", center = (350, 268), color = "black", fontsize = 16)
        screen.draw.text("–∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ —Ç–∞–π–Ω—ã –í—Å–µ–ª–µ–Ω–Ω–æ–π", center = (350, 286), color = "black", fontsize = 16)
        screen.draw.text("–Ω–æ –æ—Å—Ç–µ—Ä–µ–≥–∞–π—Å—è —á–µ—Ä–Ω—ã—Ö –¥—ã—Ä", center = (350, 304), color = "black", fontsize = 16)
        screen.draw.text("–∏ –∫–æ—Ä–∞–±–ª–µ–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –ø–∏—Ä–∞—Ç–æ–≤", center = (350, 322), color = "black", fontsize = 16)
        screen.draw.text("–Ø –≤ –¥–µ–ª–µ!!!", center = (320, 350), color = "yellow", fontsize = 16)
    
    # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–µ–Ω—é —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
    elif mode == "menu":
        fon_win.draw()
        screen.draw.text("–¢–ê–ô–ù–´    –ì–ê–õ–ê–ö–¢–ò–ö–ò!", center = (350, 40), color = "green", fontsize = 36)
        ship.draw()
        vrag_menu.draw()
        planets[5].draw()
        rose.draw()
        enemy.draw()
        glove_2.draw()
        screen.draw.text("–£–ø—Ä–∞–≤–ª—è–π –∫–æ—Ä–∞–±–ª–µ–º —Å –ø–æ–º–æ—â—å—é –º—ã—à–∫–∏", center = (320, 160), color = "black", fontsize = 16)
        screen.draw.text("–°—Ç—Ä–µ–ª—è–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Å—Ç—Ä–µ–ª–æ–∫ ‚¨ÖÔ∏è‚¨ÜÔ∏è‚û°Ô∏è", center = (350, 185), color = "black", fontsize = 16)
        screen.draw.text("–û—Å—Ç–µ—Ä–µ–≥–∞–π—Å—è —á–µ—Ä–Ω—ã—Ö –¥—ã—Ä", center = (350, 200), color = "black", fontsize = 16)
        screen.draw.text("–î–æ–±—É–¥—å –≤ –∫–æ—Å–º–æ—Å–µ —Ü–≤–µ—Ç–æ–∫ –ê—Ä—Ç–µ—Ä–æ–∑—É", center = (350, 215), color = "black", fontsize = 16)
        screen.draw.text("–¢–≤–æ–π —Ç–æ—Ç–µ–º —É –æ–¥–Ω–æ–≥–æ –∏–∑ –ê—Ä—Ç–µ—Å—Ç–∞—Ä—Ü–µ–≤", center = (350, 230), color = "black", fontsize = 16)
        screen.draw.text("–£–≥–∞–¥–∞–π, —É –∫–∞–∫–æ–≥–æ —Å —á–µ—Ç—ã—Ä—ë—Ö –ø–æ–ø—ã—Ç–æ–∫", center = (350, 245), color = "black", fontsize = 16)
        screen.draw.text("–£–î–ê–ß–ò! –ü–û–ï–•–ê–õ–ò!!!", center = (350, 261), color = "black", fontsize = 16)
        
        
        # –û–∫–Ω–æ –ø—Ä–æ–∏–≥—Ä—ã—à–∞ 
    elif mode == "end":
        fon.draw()
        polomka.draw()
        knopka.draw()
        screen.draw.text("GAME OVER!", center = (450, 50), color = "white", fontsize = 36)
        #–ò—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç
        screen.draw.text("–í—ã —Å–±–∏–ª–∏           –∫–æ—Ä–∞–±–ª–µ–π", center = (450, 100), color = "white", fontsize = 36)
        screen.draw.text(count_vragi, center = (460, 100), color = "white", fontsize = 36)
        screen.draw.text("+          ü™ô ", center = (450, 150), color = "white", fontsize = 36)
        screen.draw.text(count_vragi, center = (450, 150), color = "white", fontsize = 36)
        screen.draw.text("–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–º–æ–Ω—Ç–∞           ü™ô", center = (450, 190), color = "white", fontsize = 36)
        screen.draw.text(count_polomok, center = (600, 190), color = "white", fontsize = 36)
        screen.draw.text("–†–ï–ú–û–ù–¢", center = (350, 305), color = "white", fontsize = 36)

    elif mode == "go":
        GO.draw()

    elif mode == "go_totem":
        GO.draw()
        screen.draw.text("–¢—ã –Ω–µ –Ω–∞—à–µ–ª —Ö—Ä–∞–Ω–∏—Ç–µ–ª—è —Ç–æ—Ç–µ–º–∞", center = (350, 200), color = "yellow", fontsize = 21)
        screen.draw.text("–∏ –Ω–µ —Ä–∞–∑–≥–∞–¥–∞–ª —Ç–∞–π–Ω—É –≥–∞–ª–∞–∫—Ç–∏–∫–∏", center = (350, 270), color = "yellow", fontsize = 21)
        screen.draw.text("–ø–æ–≤–µ–∑—ë—Ç –≤ –¥—Ä—É–≥–æ–π —Ä–∞–∑!", center = (350, 340), color = "yellow", fontsize = 21)

    elif mode == "net_rose":
        GO.draw()
        screen.draw.text("–¢—ã –Ω–µ –Ω–∞—à–µ–ª –≤–æ–ª—à–µ–±–Ω—É—é –ê—Ä—Ç–µ—Ä–æ–∑—É", center = (350, 200), color = "yellow", fontsize = 21)
        screen.draw.text("–º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ—Ç–µ–º –æ—Å—Ç–∞–µ—Ç—Å—è —É –ê—Ä—Ç–µ—Å—Ç–∞—Ä—Ü–∞", center = (350, 200), color = "yellow", fontsize = 21)
        screen.draw.text("–ø–æ–≤–µ–∑—ë—Ç –≤ –¥—Ä—É–≥–æ–π —Ä–∞–∑!", center = (350, 200), color = "yellow", fontsize = 21)
    
    # –û–∫–Ω–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
    if mode == 'level_end':
        fon.draw()
        screen.draw.text("–£–†–û–í–ï–ù–¨ –ü–†–û–ô–î–ï–ù!", center = (300, 200), color = "white", fontsize = 36)
        #–ò—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç
        screen.draw.text("–í—ã —Å–±–∏–ª–∏           –∫–æ—Ä–∞–±–ª–µ–π", center = (300, 200), color = "white", fontsize = 36)
        screen.draw.text(count_vragi, center = (240, 200), color = "white", fontsize = 36)
        screen.draw.text("+      ü™ô ", center = (300, 250), color = "white", fontsize = 36)
        screen.draw.text(count_vragi, center = (240, 250), color = "white", fontsize = 36)

    # –û–∫–Ω–æ –ø–æ–±–µ–¥—ã –≤ –∏–≥—Ä–µ
    if mode == 'pobeda':
        fon_win.draw()
        win.draw()
        starec_final.draw()
        artegora_flower.draw()
        totem.draw()
        screen.draw.text("–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã –ø–æ–ª—É—á–∞–µ—à—å —Ü–≤–µ—Ç–æ–∫ –ê—Ä—Ç–µ–≥–æ—Ä—ã! –û–Ω —Å–ø–∞—Å–µ—Ç –ø–ª–∞–Ω–µ—Ç—É –ì–∞–ª–∞–∫—Ç–∏–æ–Ω –æ—Ç –∑–∞—Å—É—Ö–∏", center=(WIDTH/2, HEIGHT/2 - 50), color = 'green', fontsize = 16)
        screen.draw.text("–ù–∞—Ä–æ–¥ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç–µ—Ä–∏–∞–Ω—Ü–µ–≤ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç —Ç–µ–±—è –∑–∞ —Ü–≤–µ—Ç–æ–∫ –≤—Å–µ–ª–µ–Ω—Å–∫–æ–π –º—É–¥—Ä–æ—Å—Ç–∏ –ê—Ä—Ç–µ—Ä–æ–∑—É!", center=(WIDTH/2, HEIGHT/2+50), color = 'green', fontsize = 16)
        screen.draw.text("–ü—Ä–∏–º–∏ –≤ –∑–Ω–∞–∫ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ –ê—Ä—Ç–µ—Ç–æ—Ç–µ–º. –û–Ω —Å–ø–∞—Å–µ—Ç —Ç–≤–æ—é –ø–ª–∞–Ω–µ—Ç—É –æ—Ç –ø–æ—Ç–æ–ø–∞", center=(WIDTH/2, HEIGHT/2 + 150), color = 'green', fontsize = 16)


# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∞–±–ª–µ–º —Å –ø–æ–º–æ—â—å—é –º—ã—à–∫–∏
def on_mouse_move(pos):
    ship.pos = pos

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ–≥–æ –≤—Ä–∞–≥–∞
def new_vrag():
    x = random.randint(50, 650)
    y = -50
    vrag = Actor("arteship", (x, y))
    vrag.speed = random.randint(2, 8)
    vragi.append(vrag)

# –î–≤–∏–∂–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤
def move_vrag():
    global count_vragi
    for i in range(len(vragi)):
        if vragi[i].y < 650:
            vragi[i].y += vragi[i].speed
        else:
            # —É–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤
            vragi.pop(i)
            count_vragi -= 1
            plus_vrag()

# –î–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç
def planet():
    for i in range(len(planets)):
        if planets[i].y < 550:
                planets[i].y = planets[i].y + 1
        else:
            planets[i].x = random.randint(0, 600)
            planets[i].y = random.randint(-2500, -155)

# –î–≤–∏–∂–µ–Ω–∏–µ —á—ë—Ä–Ω–æ–π –¥—ã—Ä—ã
def holemuve():
    if hole.y < 550:
        hole.y = hole.y + 2
    else:
        hole.x = random.randint(0, 600)
        hole.y = random.randint(-255, -155)

# –î–≤–∏–∂–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ä–æ–∑—ã
def rosemuve():
    if rose.y < 550:
        rose.y = rose.y + 2
    else:
        rose.x = random.randint(0, 600)
        rose.y = random.randint(-255, -100)
    
# –±–æ–Ω—É—Å–µ–∞ —á–∞—Å–µ–∞üòè

def normal_speed():
    global planets
    for enemy in vragi:
        enemy.speed = random.randint(4, 8)

def chas():
    if ship.colliderect(planets[6]) and mode == 'shooter':
        planets[6].y -= 1500
        for enemy in vragi:
            enemy.speed = 0
        schedule_unique(normal_speed,5)

# –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
def collisions():
    global mode, count_vragi, vragi, bullets, count_polomok, planets, krot, arterose_vin

    #–ë–æ–Ω—É—Å —á–∞—Å—ã
    chas()
    
    #–ë–æ–Ω—É—Å –±–æ–º–±–æ—á–∫–∞
    if ship.colliderect(planets[7]):
        for i in range(len(vragi)):
            vragi[i].y -= 425
            planets[7].y -= 1500
            
    #–ë–æ–Ω—É—Å –º–æ–Ω–µ—Ç–∫–∞
    if ship.colliderect(planets[8]):
        count_vragi = count_vragi * 2
        planets[8].y -= 1500
        
    for i in range(len(vragi)):
        if ship.colliderect(vragi[i]):
            mode = 'end'
            vragi = [] 
            count_polomok += 1
            break
                     
        #–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ø—É–ª—è–º–∏
        for j in range(len(bullets)):
            if bullets[j].colliderect(vragi[i]):
                vragi.pop(i)
                bullets.pop(j)
                count_vragi += 1
                new_vrag()
                break
                    
        for l in range(len(bullets_left)):
            if bullets_left[l].colliderect(vragi[i]):
                vragi.pop(i)
                bullets_left.pop(l)
                count_vragi += 1
                new_vrag()
                break
    
        for r in range(len(bullets_right)):
            if bullets_right[r].colliderect(vragi[i]):
                vragi.pop(i)
                bullets_right.pop(r)
                count_vragi += 1
                new_vrag()
                break

        #–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —á—ë—Ä–Ω–æ–π –¥—ã—Ä–æ–π 
    if ship.colliderect(hole):
        mode = 'go'

        #–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –∫—Ä–æ—Ç–æ–≤–æ–π –Ω–æ—Ä–æ–π 
    if count_vragi >= 50 and ship.colliderect(krot):
        mode = 'krot_nora'
        vragi = []
        planets = []

        #–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –ê—Ä—Ç–µ—Ä–æ–∑–æ–π 
    if count_vragi >= 35 and ship.colliderect(rose):
        arterose_vin = 1
        rose.y -= 5000

def update(dt):
    global mode, count_vragi, vragi, bullets, count_polomok
    if mode == "shooter":
        move_vrag()
        collisions()
        planet()
        holemuve()
        rosemuve()

        # –î–≤–∏–∂–µ–Ω–∏–µ –ø—É–ª—å
        for i in range(len(bullets)):
            if bullets[i].y < -35:
                bullets.pop(i)
                break
            else:
                bullets[i].y = bullets[i].y - 15
    
        for i in range(len(bullets_left)):
            if bullets_left[i].x < -15:
                bullets_left.pop(i)
                break
            else:
                bullets_left[i].x = bullets_left[i].x - 15
    
        for i in range(len(bullets_right)):
            if bullets_right[i].x > WIDTH + 15:
                bullets_right.pop(i)
                break
            else:
                bullets_right[i].x = bullets_right[i].x + 15

def on_key_down(key):
    global count_polomok, count_vragi, colli, mode, enemies, artegori, palochki, old_x, old_y, arterose_vin, popytka
    
    # –ü—É–ª—å–∫–∏ –∑–∞–ø—É—Å–∫
    if keyboard.left:
        bullet = Actor("lazer_b_2")
        bullet.pos = ship.pos
        bullets_left.append(bullet)
    elif keyboard.up:
        bullet = Actor("lazer_b")
        bullet.pos = ship.pos
        bullets.append(bullet)
    elif keyboard.right:
        bullet = Actor("lazer_b_2")
        bullet.pos = ship.pos
        bullets_right.append(bullet)

    # –î–≤–∏–∂–µ–Ω–∏–µ –≥–µ—Ä–æ–∏–Ω–∏ –≤ —Ä–æ–≥–∞–ª–∏–∫–µ
    if mode == 'krot_nora':
        old_x = hero.x
        old_y = hero.y
        
        if keyboard.right and hero.x < f1.width * 13:
            hero.image = "hero_red"
            hero.x += f1.width
    
        if keyboard.left and hero.x > f1.width:
            hero.image = "hero_red_left"
            hero.x -= f1.width
    
        if keyboard.down and hero.y < f1.height * 6:
            hero.image = "hero_red_down"
            hero.y += f1.height
    
        if keyboard.up and hero.y > f1.height:
            hero.image = "hero_red_up"
            hero.y -= f1.height

    #–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –∞—Ä—Ç–µ—Å—Ç–∞—Ä—Ü–∞–º–∏ –≤ —Ä–æ–≥–∞–ª–∏–∫–µ
    enemy_index = hero.collidelist(enemies)
    if enemy_index != -1:
        hero.x = old_x
        hero.y = old_y
        colli = 1
        enemy = enemies[enemy_index]
         
        #–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
        if enemy.bonus == 1:
            enemy.image = 'artegora'
            if arterose_vin == 1:
                mode = 'pobeda'
            else:
                mode = 'net_rose'
            
        elif enemy.bonus == 0:
            enemy.image = 'magic_wand_8Q6jP9l' 
            popytka -= 1 
            if popytka <= 0:
                mode = "go_totem"               
        
def on_mouse_down(button, pos):
    global mode, count_vragi, count_polomok, colli
      
    #–ö–ª–∏–∫ –ø–æ –ø–µ—Ä—á–∞—Ç–∫–µ –≤ –º–µ–Ω—é –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
    if glove.collidepoint(pos) and mode == 'privetstvie':
        mode = 'menu'
            
    #–ö–ª–∏–∫ –ø–æ –ø–µ—Ä—á–∞—Ç–∫–µ –≤ –º–µ–Ω—é —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏–≥—Ä—ã
    if glove_2.collidepoint(pos) and mode == 'menu':
        mode = 'shooter'
        for i in range(8):
            plus_vrag()
            
     
    #–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –†–ï–ú–û–ù–¢
    if knopka.collidepoint(pos) and mode == 'end':
        if count_vragi >= count_polomok: 
            mode = 'shooter'
            fon.image = 'space'
            count_vragi -= count_polomok
            vragi = []
            bullets = []
            bullets_left = []
            bullets_right = []
            for i in range(8):
                plus_vrag()
        if count_vragi < count_polomok:
            mode = 'go'
